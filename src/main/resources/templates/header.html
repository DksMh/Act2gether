<!-- header.html (ìˆ˜ì • ë²„ì „) -->
<div th:fragment="header">
  <header>
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    
    <!-- style.cssë¥¼ ë¨¼ì € ë¡œë“œ (CSS ë³€ìˆ˜ ì •ì˜) -->
    <link rel="stylesheet" href="/css/style.css">
    
    <!-- Critical CSS (ë ˆì´ì•„ì›ƒ ê¹¨ì§ ë°©ì§€ + ê¸°ë³¸ ìŠ¤íƒ€ì¼) -->
    <style>
      /* ê¸´ê¸‰ ê¸°ë³¸ê°’ (style.css ë¡œë“œ ì „) */
      :root {
        --color-black: #141414;
        --color-gray-500: #646464;
        --color-gray-200: #e0e0e0;
        --color-gray-100: #eeeeee;
        --color-gray-050: #f5f5f5;
        --color-white: #ffffff;
        --color-main: #ff5900;
        --font-h4: 1.5rem;
        --font-h6: 1rem;
        --font-p: 0.875rem;
        --weight-bold: 700;
        --weight-medium: 500;
        --grid-width: 72rem;
      }
      
      header {
        background: #ffffff;
        border-bottom: 1px solid #e0e0e0;
      }
      
      .header-wrapper {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 72rem;
        margin: 0 auto;
        padding: 1rem 2rem;
      }
      
      .header-left {
        display: flex;
        align-items: center;
        gap: 2rem;
      }
      
      .logo {
        font-weight: 700;
        font-size: 1.5rem;
        color: #ff5900;
      }
      
      .logo a {
        color: inherit;
        text-decoration: none;
      }
      
      .main-menu {
        display: flex;
        gap: 2rem;
        list-style: none;
        margin: 0;
        padding: 0;
      }
      
      .main-menu a {
        color: #141414;
        text-decoration: none;
        font-size: 1rem;
      }
      
      .mobile-menu-toggle,
      .mobile-menu,
      .mobile-menu-overlay,
      .mobile-font-controls {
        display: none;
      }
      
      .font-size-controls {
        display: none;
      }
      
      @media(max-width: 768px) {
        .header-left nav,
        .header-right .header-actions {
          display: none !important;
        }
        .mobile-menu-toggle {
          display: block;
          width: 48px;
          height: 48px;
          border: 2px solid #c2c2c2;
          background: transparent;
          border-radius: 8px;
          cursor: pointer;
          position: relative;
        }
        .mobile-menu-toggle span {
          display: block;
          width: 24px;
          height: 3px;
          background: #141414;
          position: absolute;
          left: 50%;
          transform: translateX(-50%);
          transition: all 0.3s;
        }
        .mobile-menu-toggle span:nth-child(1) { top: 14px; }
        .mobile-menu-toggle span:nth-child(2) { top: 22px; }
        .mobile-menu-toggle span:nth-child(3) { top: 30px; }
      }
    </style>

    <!-- header.css ë¡œë“œ -->
    <link rel="stylesheet" href="/css/header.css">
    
    <!-- ê¸€ì í¬ê¸° ì¡°ì ˆ ì»¨íŠ¸ë¡¤ (ì „ì²´ ë””ë°”ì´ìŠ¤) -->
    <div class="font-size-controls" id="globalFontControls">
      <div class="font-label">ê¸€ìí¬ê¸°</div>
      <button class="font-btn active" data-size="normal" aria-label="ê¸°ë³¸ í¬ê¸°">ê¸°ë³¸</button>
      <button class="font-btn" data-size="large" aria-label="ì¡°ê¸ˆ í¬ê²Œ">í¬ê²Œ</button>
      <button class="font-btn" data-size="xlarge" aria-label="í¬ê²Œ">ë” í¬ê²Œ</button>
    </div>
    
    <!-- ëª¨ë°”ì¼ ì „ìš© ê°„ë‹¨ ë²„ì „ -->
    <div class="font-size-controls-mobile" role="region" aria-label="ê¸€ì í¬ê¸° ì¡°ì ˆ">
      <button type="button" class="font-toggle-btn" aria-expanded="false" aria-controls="font-popup">
        <span class="icon" aria-hidden="true">ê°€</span>
        <span class="label">ê¸€ì í¬ê¸°</span>
      </button>

      <div id="font-popup" class="font-popup" role="menu" aria-label="ê¸€ì í¬ê¸° ì˜µì…˜">
        <button class="font-btn-mobile" data-font-size="normal" role="menuitem">ê¸°ë³¸</button>
        <button class="font-btn-mobile" data-font-size="large" role="menuitem">í¬ê²Œ</button>
        <button class="font-btn-mobile" data-font-size="xlarge" role="menuitem">ë” í¬ê²Œ</button>
      </div>
    </div>

    <div class="header-wrapper">
      <div class="header-left">
        <!-- ë¡œê³  -->
        <div class="logo"><a href="/">ì—¬ê¸°ë¶€í„°</a></div>

        <!-- ë°ìŠ¤í¬í†± ë„¤ë¹„ê²Œì´ì…˜ -->
        <nav>
          <ul class="main-menu">
            <li><a href="/tour-search">íˆ¬ì–´ íƒìƒ‰</a></li>
            <li><a href="/community-search">ëª¨ì„ ì°¾ê¸°</a></li>
            <li><a href="#">ì„œë¹„ìŠ¤ ì†Œê°œ</a></li>
            <li><a href="#">ì„œë¹„ìŠ¤ ì´ìš©</a></li>
            <li class="has-submenu">
              <a href="#">ê³ ê°ì„¼í„°</a>
              <ul class="submenu">
                <li><a href="/faq">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</a></li>
                <li><a href="/qna">ë¬¸ì˜ ê²Œì‹œíŒ</a></li>
              </ul>
            </li>
          </ul>
        </nav>
      </div>

      <div class="header-right">
        <!-- ë°ìŠ¤í¬í†± ë¡œê·¸ì¸/íšŒì›ê°€ì… -->
        <div class="header-actions">
          <!-- ë¹„ë¡œê·¸ì¸ ì‹œ -->
          <div class="auth-buttons" th:if="${!isAuthenticated}">
            <a href="/login" class="btn btn-primary">ë¡œê·¸ì¸</a>
            <a href="/signup" class="btn btn-primary">íšŒì›ê°€ì…</a>
          </div>

          <!-- ë¡œê·¸ì¸ ì‹œ -->
          <div class="user-buttons" th:if="${isAuthenticated}">
            <span class="user-welcome" th:text="${username != null ? username + 'ë‹˜' : 'ì‚¬ìš©ìë‹˜'}">ì‚¬ìš©ìë‹˜</span>
            <a href="/admin" th:if="${isAdmin}" class="admin-link">ê´€ë¦¬ì</a>
            <a href="/mypage#wishlist">ì°œ ëª©ë¡</a>
            <a href="/mypage" class="btn btn-secondary">ë‚´ ì •ë³´</a>
            <a href="/users/logout" class="btn-logout">ë¡œê·¸ì•„ì›ƒ</a>
          </div>

          <!-- ê²€ìƒ‰ ì•„ì´ì½˜ -->
          <button class="search-icon" aria-label="ê²€ìƒ‰">ğŸ”</button>
        </div>

        <!-- ëª¨ë°”ì¼ í–„ë²„ê±° ë©”ë‰´ ë²„íŠ¼ -->
        <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="ë©”ë‰´ ì—´ê¸°">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
    </div>

    <!-- ëª¨ë°”ì¼ ë©”ë‰´ ì˜¤ë²„ë ˆì´ -->
    <div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>

    <!-- ëª¨ë°”ì¼ ìŠ¬ë¼ì´ë“œ ë©”ë‰´ -->
    <div class="mobile-menu" id="mobileMenu">
      <div class="mobile-menu-header">
        <div class="logo"><a href="/">ì—¬ê¸°ë¶€í„°</a></div>
        <button class="mobile-menu-close" id="mobileMenuClose" aria-label="ë©”ë‰´ ë‹«ê¸°">Ã—</button>
      </div>

      <!-- ëª¨ë°”ì¼ ê¸€ì í¬ê¸° ì¡°ì ˆ (ë©”ë‰´ ë‚´ë¶€ì—ì„œ ì œê±°) -->

      <!-- ëª¨ë°”ì¼ ë„¤ë¹„ê²Œì´ì…˜ -->
      <ul class="mobile-menu-nav">
        <li><a href="/tour-search">íˆ¬ì–´ íƒìƒ‰</a></li>
        <li><a href="/community-search">ëª¨ì„ ì°¾ê¸°</a></li>
        <li><a href="#">ì„œë¹„ìŠ¤ ì†Œê°œ</a></li>
        <li><a href="#">ì„œë¹„ìŠ¤ ì´ìš©</a></li>
        <li>
          <a href="#">ê³ ê°ì„¼í„°</a>
          <div class="mobile-submenu">
            <a href="/faq">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</a>
            <a href="/qna">ë¬¸ì˜ ê²Œì‹œíŒ</a>
          </div>
        </li>
      </ul>

      <!-- ëª¨ë°”ì¼ ë¡œê·¸ì¸/íšŒì›ê°€ì… -->
      <div class="mobile-menu-actions">
        <!-- ë¹„ë¡œê·¸ì¸ ì‹œ -->
        <div th:if="${!isAuthenticated}">
          <a href="/login" class="btn btn-primary">ë¡œê·¸ì¸</a>
          <a href="/signup" class="btn btn-secondary">íšŒì›ê°€ì…</a>
        </div>

        <!-- ë¡œê·¸ì¸ ì‹œ -->
        <div th:if="${isAuthenticated}">
          <div class="user-info">
            <span th:text="${username != null ? username + 'ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤' : 'í™˜ì˜í•©ë‹ˆë‹¤'}">í™˜ì˜í•©ë‹ˆë‹¤</span>
          </div>
          <a href="/mypage" class="btn btn-primary">ë‚´ ì •ë³´</a>
          <a href="/mypage#wishlist" class="btn btn-secondary">ì°œ ëª©ë¡</a>
          <a href="/admin" th:if="${isAdmin}" class="btn btn-secondary">ê´€ë¦¬ì</a>
          <a href="/users/logout" class="btn btn-outline">ë¡œê·¸ì•„ì›ƒ</a>
        </div>
      </div>
    </div>
  </header>

  <!-- JavaScript íŒŒì¼ (deferë¡œ ë¹„ë™ê¸° ë¡œë“œ) -->
  <script src="/js/header.js" defer></script>
</div>