<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì—¬ê¸°ë¶€í„° - íˆ¬ì–´ íƒìƒ‰</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/community-search.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="/js/community-search.js"></script>
  </head>
  <body>
    <!-- Header -->
    <div th:replace="header :: header"></div>

  <div class="container">
    <br /><br />
    <!-- ìƒë‹¨ íƒ€ì´í‹€ -->
    <h2 class="h1">í•¨ê»˜ ì—¬í–‰ì„ ë– ë‚  ì¸ì—°ì„ ë§ºì–´ë³´ì„¸ìš” <small>ğŸ€</small></h2>
    <p class="subtle"><span id="userName" th:text="${username}"></span>ë‹˜ì´ í˜„ì¬ ê°€ì…ì¤‘ì¸ ì—¬í–‰</p>

    <!-- ê°€ì… ì¤‘ì¸ ì—¬í–‰ ê°€ë¡œ ìŠ¤í¬ë¡¤ ì¹´ë“œ -->
    <div id="enrolledScroller" class="scroller"></div>

    <div class="hr"></div>
    <br /><br />
    <!-- ë‚´ ì§€ì—­ ì¶œë°œ ëª¨ì„ -->
    <h2 class="h1">ë‚´ ì§€ì—­ ì¶œë°œ ëª¨ì„</h2>
    <p class="subtle"><span id="myCity" style="color:#ef4444;font-weight:800" >ì„œìš¸</span> ì§€ì—­ì˜ íˆ¬ì–´ ëª¨ì„ì„ ì¶”ì²œí•´ ë“œë¦½ë‹ˆë‹¤.</p>
    <div id="localGrid" class="grid"></div>

    <div class="hr"></div>

    <br /><br />
    <!-- ëª¨ì„ ì°¾ê¸° -->
    <h2 class="h1">ëª¨ì„ ì°¾ê¸°</h2>
    <div class="filters">
      <div class="select">
        ì¶œë°œ ì§€ì—­
        <select id="filterFrom"></select>
      </div>
      <div class="select">
        ë„ì°© ì§€ì—­
        <select id="filterTo"></select>
      </div>
      <div class="date">
        ì—¬í–‰ ì‹œì‘ì¼
        <input id="filterStart" type="date"/>
      </div>
      <div class="date">
        ì—¬í–‰ ì¢…ë£Œì¼
        <input id="filterEnd" type="date"/>
      </div>
    </div>
    <div id="searchGrid" class="grid"></div>
  </div>
  </body>
  <script th:inline="javascript">
    /* =========== init =========== */
      window.currentUser = {
    username: /*[[${username}]]*/ ""
  };
renderEnrolled();
renderLocal();
// renderLocal('ì„œìš¸');
buildFilters();
renderSearch();

['change','input'].forEach(ev=>{
  $('#filterFrom').addEventListener(ev, ()=>{ renderSearch(); renderLocal($('#filterFrom').value||'ì„œìš¸'); });
  $('#filterTo').addEventListener(ev, renderSearch);
  $('#filterStart').addEventListener(ev, renderSearch);
  $('#filterEnd').addEventListener(ev, renderSearch);
});

// ì‚¬ìš©ì ì´ë¦„ í‘œê¸° (ë°±ì—”ë“œì—ì„œ window.currentUserName ì£¼ì…í•œë‹¤ê³  ê°€ì •)
if (window.currentUserName) $('#userName').textContent = window.currentUserName;
  </script>
</html>
