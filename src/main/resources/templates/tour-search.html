<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>여기부터 - 투어 검색</title>
    <!-- CSS 파일들 -->
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/tour-search.css" />
    <!-- 폰트 -->
    <link
      rel="stylesheet"
      as="style"
      crossorigin
      href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css"
    />
    <!-- jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  </head>

  <body>
    <!-- Header -->
    <div th:replace="~{header :: header}"></div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-spinner">
      <div class="spinner"></div>
    </div>

    <!-- Main Container -->
    <div class="tour-search-container">
      <!-- Page Header -->
      <div class="page-header">
        <h1 class="page-title">어떤 여행을 떠나볼까요?</h1>
      </div>

      <!-- Search Filters -->
      <div class="search-filters">
        <div class="filter-row">
          <!-- 지역 선택기 -->
          <div class="filter-group">
            <label>여행지역 <small class="required">*</small></label>
            <div class="region-selector-container">
              <select class="filter-select" id="regionFilter">
                <option value="">여행지역</option>
              </select>
              <select
                class="filter-select"
                id="sigunguFilter"
                style="display: none"
              >
                <option value="">시군구 선택</option>
              </select>
            </div>
          </div>

          <!-- 장소 (6개 선택 가능) -->
          <div class="filter-group">
            <label
              >가고싶은 장소 <span class="selection-count">최대 6개</span>
              <small class="group-info">(7그룹)</small></label
            >
            <div class="custom-dropdown-container" id="placeFilterContainer">
              <div class="dropdown-trigger" data-target="placeOptions">
                <span class="dropdown-label">장소 선택</span>
                <span class="dropdown-arrow">▼</span>
              </div>
              <div class="dropdown-options grouped-options" id="placeOptions">
                <!-- JavaScript에서 7그룹 동적 생성 -->
              </div>
            </div>
          </div>

          <!-- v3.0: 편의시설 필터 -->
          <div class="filter-group">
            <label>편의시설</label>
            <select class="filter-select" id="needsFilter">
              <option value="">편의시설</option>
            </select>
          </div>

          <!-- 방문지 수 -->
          <div class="filter-group">
            <label>방문지 수</label>
            <select class="filter-select" id="curationCount">
              <option value="">방문지 수</option>
              <option value="3">3개 (간단)</option>
              <option value="6" selected>6개 (적당)</option>
              <option value="9">9개 (풍성)</option>
              <option value="12">12개 (완전)</option>
              <option value="15">15개 (최대)</option>
            </select>
          </div>

          <!-- 검색 버튼 -->
          <div class="filter-group search-group">
            <button id="doSearchBtn" class="btn-primary">🔍 투어 찾기</button>
            <button id="clearFiltersBtn" class="btn-secondary">
              🔄 초기화
            </button>
          </div>
        </div>
      </div>

      <!-- Recommended Tours Section -->
      <div class="tours-section">
        <div class="section-header">
          <h2 class="section-title">회원님을 위한 맞춤 투어</h2>
        </div>
        <div class="tour-list" id="recommendedTours">
          <div class="recommendation-placeholder">
            <div class="placeholder-icon">🔍</div>
            <h3>여행 검색을 시작해보세요!</h3>
            <p>
              편의시설 정보로 더 안전하고 접근성 좋은 관광지를 찾아보세요.<br />
              필터를 설정한 후 <strong>🔍 검색하기</strong> 버튼을 눌러주세요!
            </p>
            <div class="search-hint">
              <div class="hint-item">
                <span class="hint-number">1</span>
                <span class="hint-text">지역 1개 선택 (17개 광역시도)</span>
              </div>
              <div class="hint-item">
                <span class="hint-number">2</span>
                <span class="hint-text">가고싶은 장소 최대 6개 선택</span>
              </div>
              <div class="hint-item">
                <span class="hint-number">3</span>
                <span class="hint-text"
                  >편의시설 필터로 나에게 편한 여행지 찾기</span
                >
              </div>
              <div class="hint-item">
                <span class="hint-number">4</span>
                <span class="hint-text">🔍 투어 찾기 버튼으로 투어 생성</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 편의시설 안내 섹션 -->
      <div class="tours-section">
        <div class="section-header">
          <h2 class="section-title">편의시설 정보 안내</h2>
          <div class="section-subtitle">
            액티브 시니어를 위한 무장애여행 정보를 제공합니다
          </div>
        </div>

        <div class="accessibility-guide">
          <div class="accessibility-categories">
            <div class="category-item">
              <span class="category-icon">🅿️</span>
              <div class="category-text">
                <strong>주차 편의</strong>
                <small>주차장, 대중교통 접근성</small>
              </div>
            </div>
            <div class="category-item">
              <span class="category-icon">🛤️</span>
              <div class="category-text">
                <strong>접근 편의</strong>
                <small>경사로, 출입통로 접근성</small>
              </div>
            </div>
            <div class="category-item">
              <span class="category-icon">🚻</span>
              <div class="category-text">
                <strong>시설 편의</strong>
                <small>화장실, 엘리베이터</small>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Pagination -->
      <div class="pagination" id="pagination" style="display: none">
        <button class="pagination-btn prev" id="prevBtn">&lt;</button>
        <div class="pagination-numbers" id="paginationNumbers"></div>
        <button class="pagination-btn next" id="nextBtn">&gt;</button>
      </div>
    </div>

    <!-- Footer -->
    <div th:replace="~{footer :: footer}"></div>

    <!-- Modal -->
    <div class="modal-overlay" id="tourDetailModal" style="display: none">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalTitle">투어 상세 정보</h2>
          <button class="modal-close" onclick="tourSearchManager.closeModal()">
            &times;
          </button>
        </div>
        <div class="modal-body" id="modalBody"></div>
        <div class="modal-footer">
          <small>
            🚀 v2.4 무장애여행 통합: 편의시설 정보로 더 안전한 투어 정보
          </small>
        </div>
      </div>
    </div>

    <!-- JavaScript 파일들 -->
    <script src="/js/tour-utils.js"></script>
    <script src="/js/tour-search.js"></script>

    <!-- 간단한 초기화 스크립트 -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        console.log("🚀 Tour Search v2.4 무장애여행 통합 로드 완료");
        console.log(
          "✨ 핵심 기능: 편의시설 필터 + 접근성 점수 + 액티브 시니어 맞춤"
        );
      });
    </script>
  </body>
</html>
