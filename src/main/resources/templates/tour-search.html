<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>μ—¬κΈ°λ¶€ν„° - ν¬μ–΄ κ²€μƒ‰ v2.3 Enhanced</title>
    <!-- CSS νμΌλ“¤ -->
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/tour-search.css" />
    <!-- ν°νΈ -->
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  </head>

  <body>
    <!-- Header -->
    <div th:replace="~{header :: header}"></div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-spinner">
      <div class="spinner"></div>
    </div>

    <!-- Main Container -->
    <div class="tour-search-container">
      <!-- Page Header -->
      <div class="page-header">
        <h1 class="page-title">
          π― μ–΄λ–¤ μ—¬ν–‰μ„ λ– λ‚λ³ΌκΉμ”? 
          <span class="version-badge">v2.3 Enhanced</span>
        </h1>
        <p class="page-subtitle">
          π€ <strong>μ„ νƒ μ ν™•λ€!</strong> λ…Όλ¦¬μ  μ΅°ν•©λ§ κ²€μƒ‰ν•μ—¬ λ” μ •ν™•ν• κ²°κ³Ό!
          <br>
          <span style="color: #4caf50; font-weight: 600">ν…λ§ 4κ°</span> + 
          <span style="color: #2196f3; font-weight: 600">ν™λ™ 5κ°</span> + 
          <span style="color: #ff9800; font-weight: 600">μ¥μ† 6κ°</span>κΉμ§€ μ„ νƒ κ°€λ¥! 
          <br>
          <small>π― λ” λ§μ΄ μ„ νƒν• μλ΅ λ” ν’λ¶€ν• κ²°κ³Όλ¥Ό μ–»μ„ μ μμ–΄μ”!</small>
        </p>
      </div>

      <!-- Search Filters -->
      <div class="search-filters">
        <div class="filter-row">
          <!-- μ§€μ—­ μ„ νƒκΈ° -->
          <div class="filter-group">
            <label>μ—¬ν–‰μ§€μ—­ <small class="required">*</small></label>
            <div class="region-selector-container">
              <select class="filter-select" id="regionFilter">
                <option value="">μ—¬ν–‰μ§€μ—­</option>
              </select>
              <select
                class="filter-select"
                id="sigunguFilter"
                style="display: none"
              >
                <option value="">μ‹κµ°κµ¬ μ„ νƒ</option>
              </select>
            </div>
          </div>

          <!-- μ„ νΈν…λ§ (4κ°λ΅ ν™•λ€) -->
          <div class="filter-group">
            <label>μ„ νΈν…λ§ <span class="selection-count">μµλ€ 4κ°</span></label>
            <div class="custom-dropdown-container" id="themeFilterContainer">
              <div class="dropdown-trigger" data-target="themeOptions">
                <span class="dropdown-label">μ„ νΈν…λ§</span>
                <span class="dropdown-arrow">β–Ό</span>
              </div>
              <div class="dropdown-options" id="themeOptions">
                <!-- JavaScriptμ—μ„ λ™μ  μƒμ„± -->
              </div>
            </div>
          </div>

          <!-- μ„ νΈν™λ™ (5κ°λ΅ ν™•λ€) -->
          <div class="filter-group">
            <label>μ„ νΈν™λ™ <span class="selection-count">μµλ€ 5κ°</span></label>
            <div class="custom-dropdown-container" id="activityFilterContainer">
              <div class="dropdown-trigger" data-target="activityOptions">
                <span class="dropdown-label">μ„ νΈν™λ™</span>
                <span class="dropdown-arrow">β–Ό</span>
              </div>
              <div class="dropdown-options" id="activityOptions">
                <!-- JavaScriptμ—μ„ λ™μ  μƒμ„± -->
              </div>
            </div>
          </div>

          <!-- μ¥μ† (6κ°λ΅ ν™•λ€) -->
          <div class="filter-group">
            <label>μ¥μ† <span class="selection-count">μµλ€ 6κ°</span> <small class="group-info">(7κ·Έλ£Ή)</small></label>
            <div class="custom-dropdown-container" id="placeFilterContainer">
              <div class="dropdown-trigger" data-target="placeOptions">
                <span class="dropdown-label">μ¥μ†</span>
                <span class="dropdown-arrow">β–Ό</span>
              </div>
              <div class="dropdown-options grouped-options" id="placeOptions">
                <!-- JavaScriptμ—μ„ 7κ·Έλ£Ή λ™μ  μƒμ„± -->
              </div>
            </div>
          </div>

          <!-- νΈμμ‹μ„¤ -->
          <div class="filter-group">
            <label>νΈμμ‹μ„¤</label>
            <select class="filter-select" id="needsFilter">
              <option value="">νΈμμ‹μ„¤</option>
            </select>
          </div>

          <!-- λ°©λ¬Έμ§€ μ -->
          <div class="filter-group">
            <label>λ°©λ¬Έμ§€ μ</label>
            <select class="filter-select" id="curationCount">
              <option value="">λ°©λ¬Έμ§€ μ</option>
              <option value="3">3κ° (κ°„λ‹¨)</option>
              <option value="6" selected>6κ° (μ λ‹Ή)</option>
              <option value="9">9κ° (ν’μ„±)</option>
              <option value="12">12κ° (μ™„μ „)</option>
              <option value="15">15κ° (μµλ€)</option>
            </select>
          </div>

          <!-- κ²€μƒ‰ λ²„νΌ -->
          <div class="filter-group">
            <button id="doSearchBtn" class="btn-primary">
              π” κ²€μƒ‰ν•κΈ°
            </button>
            <button id="clearFiltersBtn" class="btn-secondary">
              π”„ μ΄κΈ°ν™”
            </button>
          </div>
        </div>

        <!-- Interest Tags -->
        <div class="interest-tags" id="interestTags">
          <div class="text-center">
            <div class="placeholder-icon">π―</div>
            <h3>μ„ νƒ μκ°€ ν™•λ€λμ—μ–΄μ”!</h3>
            <p>
              <strong>ν…λ§ 4κ° + ν™λ™ 5κ° + μ¥μ† 6κ°</strong>κΉμ§€ μ„ νƒ κ°€λ¥
              <br>
              <small>λ…Όλ¦¬μ  μ΅°ν•©λ§ κ²€μƒ‰λμ–΄ λ” μ •ν™•ν• κ²°κ³Όλ¥Ό μ κ³µν•©λ‹λ‹¤</small>
            </p>
          </div>
        </div>
      </div>

      <!-- Recommended Tours Section -->
      <div class="tours-section">
        <div class="section-header">
          <h2 class="section-title">
            π“ νμ›λ‹μ„ μ„ν• λ§μ¶¤ ν¬μ–΄
          </h2>
          <div class="section-subtitle">
            λ…Όλ¦¬μ  μ΅°ν•© μµμ ν™” + μ„ νƒ μ ν™•λ€λ΅ λ” μ •ν™•ν•κ³  ν’λ¶€ν• κ²°κ³Ό (v2.3)
          </div>
        </div>
        <div class="tour-list" id="recommendedTours">
          <div class="recommendation-placeholder">
            <div class="placeholder-icon">π”</div>
            <h3>v2.3 Enhanced κ²€μƒ‰μ„ μ‹μ‘ν•΄λ³΄μ„Έμ”!</h3>
            <p>ν™•λ€λ μ„ νƒ μµμ…μΌλ΅ λ” μ •ν™•ν• λ§μ¶¤ ν¬μ–΄λ¥Ό μ°Ύμ•„λ³΄μ„Έμ”.<br>
               ν•„ν„°λ¥Ό μ„¤μ •ν• ν›„ <strong>π” κ²€μƒ‰ν•κΈ°</strong> λ²„νΌμ„ λλ¬μ£Όμ„Έμ”!</p>
            <div class="search-hint">
              <div class="hint-item">
                <span class="hint-number">1</span>
                <span class="hint-text">μ§€μ—­ 1κ° μ„ νƒ (17κ° κ΄‘μ—­μ‹λ„)</span>
              </div>
              <div class="hint-item">
                <span class="hint-number">2</span>
                <span class="hint-text">ν…λ§ μµλ€ 4κ°, ν™λ™ μµλ€ 5κ°, μ¥μ† μµλ€ 6κ° μ„ νƒ</span>
              </div>
              <div class="hint-item">
                <span class="hint-number">3</span>
                <span class="hint-text">π” κ²€μƒ‰ν•κΈ° λ²„νΌμΌλ΅ λ…Όλ¦¬μ  μ΅°ν•©λ§ κ²€μƒ‰</span>
              </div>
            </div>
          </div>
        </div>
      </div>
       <!-- μ¶”μ² μ½”μ¤ μ„Ήμ… -->
      <div class="tours-section">
        <div class="section-header">
          <h2 class="section-title">π” μ΄λ° μ½”μ¤λ” μ–΄λ– μ„Έμ”?</h2>
          <div class="section-subtitle">μ„ νƒν•μ‹  μ΅°κ±΄μ— λ§λ” μ¶”μ² μ—¬ν–‰μ½”μ¤</div>
          <div class="result-count" id="resultCount" style="display: none">
            μ΄ <span class="count-number">0</span>κ°μ μ½”μ¤
          </div>
        </div>

        <!-- μ§€μ—­+ν…λ§ μ΅°ν•© μ½”μ¤ -->
        <div class="course-section" id="coursesByTheme">
          <h3 class="course-section-title">
            <span class="course-icon">π¨</span>
            μ„ νƒν•μ‹  μ§€μ—­ + ν…λ§ μ΅°ν•© μ½”μ¤
          </h3>
          <div class="tour-list" id="themeBasedCourses">
            <div class="search-placeholder">
              <div class="placeholder-icon">π¨</div>
              <h4>μ§€μ—­κ³Ό ν…λ§λ¥Ό μ„ νƒν•λ©΄ λ§μ¶¤ μ½”μ¤κ°€ ν‘μ‹λ©λ‹λ‹¤</h4>
              <p>μ„μ ν•„ν„°μ—μ„ μ§€μ—­κ³Ό μ„ νΈν…λ§λ¥Ό μ„¤μ •ν•΄μ£Όμ„Έμ”!</p>
            </div>
          </div>
        </div>

        <!-- μ§€μ—­+ν™λ™ μ΅°ν•© μ½”μ¤ -->
        <div class="course-section" id="coursesByActivity">
          <h3 class="course-section-title">
            <span class="course-icon">π―</span>
            μ„ νƒν•μ‹  μ§€μ—­ + ν™λ™ μ΅°ν•© μ½”μ¤
          </h3>
          <div class="tour-list" id="activityBasedCourses">
            <div class="search-placeholder">
              <div class="placeholder-icon">π―</div>
              <h4>μ§€μ—­κ³Ό ν™λ™μ„ μ„ νƒν•λ©΄ λ§μ¶¤ μ½”μ¤κ°€ ν‘μ‹λ©λ‹λ‹¤</h4>
              <p>μ„μ ν•„ν„°μ—μ„ μ§€μ—­κ³Ό μ„ νΈν™λ™μ„ μ„¤μ •ν•΄μ£Όμ„Έμ”!</p>
            </div>
          </div>
        </div>

        <!-- No Results Message -->
        <div class="no-results" id="noCourses" style="display: none">
          <div class="no-results-icon">π…</div>
          <h3>μ¶”μ² μ½”μ¤κ°€ μ—†μµλ‹λ‹¤</h3>
          <p>
            λ‹¤λ¥Έ μ§€μ—­μ΄λ‚ ν…λ§/ν™λ™μ„ μ„ νƒν•΄λ³΄μ‹κ±°λ‚ 7κ·Έλ£Ή μ¥μ†μ—μ„ λ‹¤λ¥Έ μµμ…μ„
            ν™•μΈν•΄μ£Όμ„Έμ”
          </p>
          <div class="main-category-suggestions">
            <button
              class="suggestion-btn"
              onclick="tourSearchManager.applyQuickFilter('nature')"
            >
              πΏ μμ—° μ½”μ¤
            </button>
            <button
              class="suggestion-btn"
              onclick="tourSearchManager.applyQuickFilter('culture')"
            >
              π›οΈ λ¬Έν™” μ½”μ¤
            </button>
            <button
              class="suggestion-btn"
              onclick="tourSearchManager.applyQuickFilter('activity')"
            >
              πƒβ€β™‚οΈ λ ν¬μΈ  μ½”μ¤
            </button>
          </div>
          <button
            class="retry-search-btn"
            onclick="tourSearchManager.clearFilters()"
          >
            ν•„ν„° μ΄κΈ°ν™”ν•κ³  λ‹¤μ‹ κ²€μƒ‰
          </button>
        </div>
      </div>

      <!-- Pagination -->
      <div class="pagination" id="pagination" style="display: none">
        <button class="pagination-btn prev" id="prevBtn">&lt;</button>
        <div class="pagination-numbers" id="paginationNumbers"></div>
        <button class="pagination-btn next" id="nextBtn">&gt;</button>
      </div>
    </div>
      <!-- λ…Όλ¦¬μ  μ΅°ν•© μ•λ‚΄ -->
      <div class="tours-section">
        <div class="section-header">
          <h2 class="section-title">π’΅ λ…Όλ¦¬μ  μ΅°ν•© μμ‹</h2>
          <div class="section-subtitle">
            μ΄λ° μ΅°ν•©λ“¤μ΄ μ¬λ°”λ¥Έ κ²€μƒ‰ κ²°κ³Όλ¥Ό μ κ³µν•©λ‹λ‹¤
          </div>
        </div>
        
        <div class="logical-combination-guide">
          <div class="combination-examples">
            <div class="example-item valid">
              <span class="example-icon">β…</span>
              <div class="example-text">
                <strong>μμ—° + μμ—°κ°μƒ + ν•΄λ³€</strong>
                <small>μ™„λ²½ν• λ…Όλ¦¬μ  μ΅°ν•©</small>
              </div>
            </div>
            <div class="example-item valid">
              <span class="example-icon">β…</span>
              <div class="example-text">
                <strong>λ¬Έν™”/μ—­μ‚¬ + μ—­μ‚¬νƒλ°© + μ‚¬μ°°</strong>
                <small>μ™„λ²½ν• λ…Όλ¦¬μ  μ΅°ν•©</small>
              </div>
            </div>
            <div class="example-item valid">
              <span class="example-icon">β…</span>
              <div class="example-text">
                <strong>λ ν¬μΈ  + μ΅μƒλ ν¬μΈ  + κ³¨ν”„μ¥</strong>
                <small>μ™„λ²½ν• λ…Όλ¦¬μ  μ΅°ν•©</small>
              </div>
            </div>
            <div class="example-item invalid">
              <span class="example-icon">β</span>
              <div class="example-text">
                <strong>λ¬Έν™”/μ—­μ‚¬ + μ—­μ‚¬νƒλ°© + ν•΄λ³€</strong>
                <small>λ…Όλ¦¬μ μΌλ΅ λ§μ§€ μ•λ” μ΅°ν•© (κ²€μƒ‰ μ•λ¨)</small>
              </div>
            </div>
          </div>
          
          <div class="combination-tip">
            <h4>π’΅ κ²€μƒ‰ ν</h4>
            <ul>
              <li><strong>ν…λ§, ν™λ™, μ¥μ†</strong>κ°€ μ„λ΅ μ—°κ΄€λλ„λ΅ μ„ νƒν•μ„Έμ”</li>
              <li><strong>μμ—°</strong> ν…λ§λΌλ©΄ <strong>μμ—°κ°μƒ</strong> ν™λ™κ³Ό <strong>ν•΄λ³€/μ‚°</strong> μ¥μ†λ¥Ό μ„ νƒ</li>
              <li><strong>λ¬Έν™”/μ—­μ‚¬</strong> ν…λ§λΌλ©΄ <strong>μ—­μ‚¬νƒλ°©</strong> ν™λ™κ³Ό <strong>μ‚¬μ°°/κ³ κ¶</strong> μ¥μ†λ¥Ό μ„ νƒ</li>
              <li>λ…Όλ¦¬μ μΌλ΅ λ§μ§€ μ•λ” μ΅°ν•©μ€ μλ™μΌλ΅ μ μ™Έλμ–΄ λ” μ •ν™•ν• κ²°κ³Όλ¥Ό μ κ³µν•©λ‹λ‹¤</li>
            </ul>
          </div>
        </div>
      </div>

    <!-- Footer -->
    <div th:replace="~{footer :: footer}"></div>

    <!-- Modal -->
    <div class="modal-overlay" id="tourDetailModal" style="display: none">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalTitle">ν¬μ–΄ μƒμ„Έ μ •λ³΄</h2>
          <button class="modal-close" onclick="tourSearchManager.closeModal()">
            &times;
          </button>
        </div>
        <div class="modal-body" id="modalBody"></div>
        <div class="modal-footer">
          <small>
            π€ v2.3 Enhanced: λ…Όλ¦¬μ  μ΅°ν•© + μ„ νƒ ν™•λ€λ΅ λ” μ •ν™•ν• ν¬μ–΄ μ •λ³΄
          </small>
        </div>
      </div>
    </div>

    <!-- JavaScript νμΌλ“¤ -->
    <script src="/js/tour-utils.js"></script>
    <script src="/js/tour-search.js"></script>
    
    <!-- κ°„λ‹¨ν• μ΄κΈ°ν™” μ¤ν¬λ¦½νΈ -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        console.log('π€ Tour Search v2.3 Enhanced λ΅λ“ μ™„λ£');
        console.log('β¨ ν•µμ‹¬ κΈ°λ¥: λ…Όλ¦¬μ  μ΅°ν•© μµμ ν™” + μ„ νƒ μ ν™•λ€');
      });
    </script>
  </body>
</html>